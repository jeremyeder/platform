@import "tailwindcss";
@import "tw-animate-css";
@import "../styles/syntax-highlighting.css";

@custom-variant dark (&:is(.dark *));

/* Google Fonts: Inter (sans) + Roboto Mono (code) */
@import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&family=Roboto+Mono:wght@400;500;600&display=swap');

@theme inline {
  --color-background: var(--background);
  --color-foreground: var(--foreground);
  --font-sans: 'Inter', system-ui, -apple-system, sans-serif;
  --font-mono: 'Roboto Mono', ui-monospace, SFMono-Regular, monospace;
  --color-sidebar-ring: var(--sidebar-ring);
  --color-sidebar-border: var(--sidebar-border);
  --color-sidebar-accent-foreground: var(--sidebar-accent-foreground);
  --color-sidebar-accent: var(--sidebar-accent);
  --color-sidebar-primary-foreground: var(--sidebar-primary-foreground);
  --color-sidebar-primary: var(--sidebar-primary);
  --color-sidebar-foreground: var(--sidebar-foreground);
  --color-sidebar: var(--sidebar);
  --color-chart-5: var(--chart-5);
  --color-chart-4: var(--chart-4);
  --color-chart-3: var(--chart-3);
  --color-chart-2: var(--chart-2);
  --color-chart-1: var(--chart-1);
  --color-ring: var(--ring);
  --color-input: var(--input);
  --color-border: var(--border);
  --color-destructive: var(--destructive);
  --color-accent-foreground: var(--accent-foreground);
  --color-accent: var(--accent);
  --color-muted-foreground: var(--muted-foreground);
  --color-muted: var(--muted);
  --color-secondary-foreground: var(--secondary-foreground);
  --color-secondary: var(--secondary);
  --color-primary-foreground: var(--primary-foreground);
  --color-primary: var(--primary);
  --color-popover-foreground: var(--popover-foreground);
  --color-popover: var(--popover);
  --color-card-foreground: var(--card-foreground);
  --color-card: var(--card);
  --color-status-success: var(--status-success);
  --color-status-success-foreground: var(--status-success-foreground);
  --color-status-success-border: var(--status-success-border);
  --color-status-error: var(--status-error);
  --color-status-error-foreground: var(--status-error-foreground);
  --color-status-error-border: var(--status-error-border);
  --color-status-warning: var(--status-warning);
  --color-status-warning-foreground: var(--status-warning-foreground);
  --color-status-warning-border: var(--status-warning-border);
  --color-status-info: var(--status-info);
  --color-status-info-foreground: var(--status-info-foreground);
  --color-status-info-border: var(--status-info-border);
  --color-link: var(--link);
  --color-link-hover: var(--link-hover);
  --color-role-view: var(--role-view);
  --color-role-view-foreground: var(--role-view-foreground);
  --color-role-edit: var(--role-edit);
  --color-role-edit-foreground: var(--role-edit-foreground);
  --color-role-admin: var(--role-admin);
  --color-role-admin-foreground: var(--role-admin-foreground);

  /* LibreChat surface/text/border tokens */
  --color-surface-primary: var(--surface-primary);
  --color-surface-primary-alt: var(--surface-primary-alt);
  --color-surface-secondary: var(--surface-secondary);
  --color-surface-tertiary: var(--surface-tertiary);
  --color-surface-chat: var(--surface-chat);
  --color-surface-hover: var(--surface-hover);
  --color-surface-active: var(--surface-active);
  --color-surface-submit: var(--surface-submit);
  --color-surface-submit-hover: var(--surface-submit-hover);
  --color-text-primary: var(--text-primary);
  --color-text-secondary: var(--text-secondary);
  --color-text-tertiary: var(--text-tertiary);
  --color-border-light: var(--border-light);
  --color-border-medium: var(--border-medium);
  --color-border-heavy: var(--border-heavy);

  --radius-sm: calc(var(--radius) - 4px);
  --radius-md: calc(var(--radius) - 2px);
  --radius-lg: var(--radius);
  --radius-xl: calc(var(--radius) + 4px);
}

/*
 * ===== LibreChat Color System =====
 * Monochromatic gray palette derived from LibreChat's style.css
 */

:root {
  /* Base gray scale */
  --gray-50:  #f7f7f8;
  --gray-100: #ececec;
  --gray-200: #e3e3e3;
  --gray-300: #cdcdcd;
  --gray-400: #999696;
  --gray-500: #595959;
  --gray-600: #424242;
  --gray-700: #2f2f2f;
  --gray-800: #212121;
  --gray-850: #171717;
  --gray-900: #0d0d0d;

  /* Accent */
  --green-700: #047857;
  --green-800: #065f46;

  --radius: 0.5rem;

  /* --- shadcn/ui HSL mappings (Light) --- */
  --background: 0 0% 100%;
  --foreground: 0 0% 13%;
  --card: 0 0% 100%;
  --card-foreground: 0 0% 13%;
  --popover: 0 0% 100%;
  --popover-foreground: 0 0% 13%;
  --primary: 0 0% 9%;
  --primary-foreground: 0 0% 98%;
  --secondary: 0 0% 96%;
  --secondary-foreground: 0 0% 9%;
  --muted: 0 0% 96%;
  --muted-foreground: 0 0% 35%;
  --accent: 0 0% 96%;
  --accent-foreground: 0 0% 9%;
  --destructive: 0 84% 60%;
  --border: 0 0% 89%;
  --input: 0 0% 89%;
  --ring: 0 0% 35%;

  --chart-1: 0 0% 35%;
  --chart-2: 0 0% 45%;
  --chart-3: 0 0% 55%;
  --chart-4: 0 0% 65%;
  --chart-5: 0 0% 75%;

  /* --- LibreChat semantic surfaces (Light) --- */
  --surface-primary: #ffffff;
  --surface-primary-alt: var(--gray-50);
  --surface-secondary: var(--gray-50);
  --surface-tertiary: var(--gray-100);
  --surface-chat: #ffffff;
  --surface-hover: var(--gray-200);
  --surface-active: var(--gray-100);
  --surface-submit: var(--green-700);
  --surface-submit-hover: var(--green-800);

  /* --- LibreChat semantic text (Light) --- */
  --text-primary: var(--gray-800);
  --text-secondary: var(--gray-600);
  --text-tertiary: var(--gray-500);

  /* --- LibreChat semantic borders (Light) --- */
  --border-light: var(--gray-200);
  --border-medium: var(--gray-300);
  --border-heavy: var(--gray-400);

  /* --- Sidebar (Light) --- */
  --sidebar: var(--gray-50);
  --sidebar-foreground: var(--gray-800);
  --sidebar-primary: var(--gray-900);
  --sidebar-primary-foreground: #ffffff;
  --sidebar-accent: var(--gray-100);
  --sidebar-accent-foreground: var(--gray-800);
  --sidebar-border: var(--gray-200);
  --sidebar-ring: var(--gray-400);

  /* Status badge semantic colors */
  --status-success: oklch(0.95 0.05 145);
  --status-success-foreground: oklch(0.35 0.15 145);
  --status-success-border: oklch(0.85 0.08 145);
  --status-error: oklch(0.95 0.05 27);
  --status-error-foreground: oklch(0.45 0.2 27);
  --status-error-border: oklch(0.85 0.08 27);
  --status-warning: oklch(0.95 0.1 85);
  --status-warning-foreground: oklch(0.4 0.15 85);
  --status-warning-border: oklch(0.85 0.12 85);
  --status-info: oklch(0.95 0.05 240);
  --status-info-foreground: oklch(0.45 0.15 240);
  --status-info-border: oklch(0.85 0.08 240);

  /* Semantic link colors */
  --link: oklch(0.45 0.15 240);
  --link-hover: oklch(0.35 0.18 240);

  /* Role badge colors */
  --role-view: oklch(0.95 0.05 240);
  --role-view-foreground: oklch(0.45 0.15 240);
  --role-edit: oklch(0.95 0.05 145);
  --role-edit-foreground: oklch(0.35 0.15 145);
  --role-admin: oklch(0.95 0.1 290);
  --role-admin-foreground: oklch(0.4 0.15 290);
}

.dark {
  /* --- shadcn/ui HSL mappings (Dark) --- */
  --background: 0 0% 5%;
  --foreground: 0 0% 93%;
  --card: 0 0% 13%;
  --card-foreground: 0 0% 93%;
  --popover: 0 0% 7%;
  --popover-foreground: 0 0% 93%;
  --primary: 0 0% 93%;
  --primary-foreground: 0 0% 9%;
  --secondary: 0 0% 15%;
  --secondary-foreground: 0 0% 93%;
  --muted: 0 0% 15%;
  --muted-foreground: 0 0% 64%;
  --accent: 0 0% 15%;
  --accent-foreground: 0 0% 93%;
  --destructive: 0 63% 41%;
  --border: 0 0% 18%;
  --input: 0 0% 18%;
  --ring: 0 0% 64%;

  --chart-1: 0 0% 75%;
  --chart-2: 0 0% 65%;
  --chart-3: 0 0% 55%;
  --chart-4: 0 0% 45%;
  --chart-5: 0 0% 35%;

  /* --- LibreChat semantic surfaces (Dark) --- */
  --surface-primary: var(--gray-900);
  --surface-primary-alt: var(--gray-850);
  --surface-secondary: var(--gray-800);
  --surface-tertiary: var(--gray-700);
  --surface-chat: var(--gray-700);
  --surface-hover: var(--gray-600);
  --surface-active: var(--gray-500);
  --surface-submit: var(--green-700);
  --surface-submit-hover: var(--green-800);

  /* --- LibreChat semantic text (Dark) --- */
  --text-primary: var(--gray-100);
  --text-secondary: var(--gray-300);
  --text-tertiary: var(--gray-500);

  /* --- LibreChat semantic borders (Dark) --- */
  --border-light: var(--gray-700);
  --border-medium: var(--gray-600);
  --border-heavy: var(--gray-500);

  /* --- Sidebar (Dark) --- */
  --sidebar: var(--gray-850);
  --sidebar-foreground: var(--gray-100);
  --sidebar-primary: var(--gray-100);
  --sidebar-primary-foreground: var(--gray-900);
  --sidebar-accent: var(--gray-700);
  --sidebar-accent-foreground: var(--gray-100);
  --sidebar-border: var(--gray-700);
  --sidebar-ring: var(--gray-500);

  /* Status badge semantic colors - Dark */
  --status-success: oklch(0.35 0.15 145);
  --status-success-foreground: oklch(0.985 0 0);
  --status-success-border: oklch(0.35 0.15 145);
  --status-error: oklch(0.45 0.2 27);
  --status-error-foreground: oklch(0.985 0 0);
  --status-error-border: oklch(0.45 0.2 27);
  --status-warning: oklch(0.5 0.15 85);
  --status-warning-foreground: oklch(0.985 0 0);
  --status-warning-border: oklch(0.5 0.15 85);
  --status-info: oklch(0.5 0.15 240);
  --status-info-foreground: oklch(0.985 0 0);
  --status-info-border: oklch(0.5 0.15 240);

  /* Semantic link colors - Dark */
  --link: oklch(0.65 0.15 240);
  --link-hover: oklch(0.75 0.12 240);

  /* Role badge colors - Dark */
  --role-view: oklch(0.5 0.15 240);
  --role-view-foreground: oklch(0.985 0 0);
  --role-edit: oklch(0.35 0.15 145);
  --role-edit-foreground: oklch(0.985 0 0);
  --role-admin: oklch(0.5 0.15 290);
  --role-admin-foreground: oklch(0.985 0 0);
}

@layer base {
  * {
    @apply border-border outline-ring/50;
  }
  body {
    @apply bg-background text-foreground font-sans;
  }
}

/* ===== Animation keyframes ===== */

@keyframes fade-in-up {
  from { opacity: 0; transform: translateY(20px); }
  to   { opacity: 1; transform: translateY(0); }
}

@keyframes fade-in-char {
  from { opacity: 0; }
  to   { opacity: 1; }
}

@keyframes pulseSize {
  0%, 100% { transform: scale(1); opacity: 0.7; }
  50%      { transform: scale(1.3); opacity: 1; }
}

/* ===== LibreChat Scrollbar: Hidden by default, appear on hover ===== */

.scrollbar-hover {
  scrollbar-width: none;
}

.scrollbar-hover::-webkit-scrollbar {
  width: 6px;
  height: 6px;
  background: transparent;
}

.scrollbar-hover::-webkit-scrollbar-thumb {
  background-color: transparent;
  border-radius: 3px;
  transition: background-color 0.3s ease 0.5s;
}

.scrollbar-hover:hover {
  scrollbar-width: thin;
  scrollbar-color: var(--border-medium) transparent;
}

.scrollbar-hover:hover::-webkit-scrollbar-thumb {
  background-color: var(--border-medium);
  transition-delay: 0s;
}

/* ===== Legacy thin scrollbar ===== */

.scrollbar-thin {
  scrollbar-width: thin;
  scrollbar-color: var(--border-medium) transparent;
}

.scrollbar-thin::-webkit-scrollbar {
  width: 6px;
  height: 6px;
}

.scrollbar-thin::-webkit-scrollbar-track {
  background: transparent;
}

.scrollbar-thin::-webkit-scrollbar-thumb {
  background: var(--border-medium);
  border-radius: 3px;
}

.scrollbar-thin::-webkit-scrollbar-thumb:hover {
  background: var(--border-heavy);
}

/* Hide scrollbar */
.scrollbar-hide {
  scrollbar-width: none;
  -ms-overflow-style: none;
}

.scrollbar-hide::-webkit-scrollbar {
  display: none;
}

/* ===== LibreChat Streaming Cursor ===== */

.result-streaming > :not(ol):not(ul):not(pre):last-child::after,
.result-streaming > pre:last-child code::after {
  content: '\25CF';
  font-family: 'Inter', system-ui, sans-serif;
  font-size: 0.6rem;
  line-height: normal;
  margin-left: 0.25rem;
  vertical-align: middle;
  animation: pulseSize 1.25s ease-in-out infinite;
}

/* ===== Gradient header fade ===== */

.header-gradient {
  background: linear-gradient(
    to bottom,
    var(--surface-primary) 0%,
    var(--surface-primary) 60%,
    transparent 100%
  );
  pointer-events: none;
}
